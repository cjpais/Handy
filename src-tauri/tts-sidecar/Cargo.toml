[package]
name = "tts-sidecar"
version = "0.1.0"
edition = "2021"
description = "TTS sidecar process for KBVE - runs in separate process to avoid ort version conflicts"

[[bin]]
name = "tts-sidecar"
path = "src/main.rs"

[dependencies]
piper-rs = "0.1.9"
serde = { version = "1", features = ["derive"] }
serde_json = "1"
log = "0.4"
env_logger = "0.11"
rodio = "0.20"
cpal = "0.15"
base64 = "0.22"

# Force ort to version compatible with piper-rs 0.1.9
[patch.crates-io]
ort = { git = "https://github.com/pykeio/ort", tag = "v2.0.0-rc.9" }
ort-sys = { git = "https://github.com/pykeio/ort", tag = "v2.0.0-rc.9" }

[profile.release]
lto = true
codegen-units = 1
strip = true
